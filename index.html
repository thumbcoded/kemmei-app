<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kemmei â€” Login</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/shared-ui.css">
  <script defer src="js/index.js"></script>
</head>
<body class="index-page">

  <div class="floating-dark-toggle">
  <label class="dark-mode-toggle">
    <input type="checkbox" id="darkModeToggle" />
    <span class="toggle-slider"></span>
    <span class="toggle-label">ðŸŒ™</span>
  </label>
</div>

  <!-- Login Container -->
  <div class="index-container">
    <h2>Welcome to Kemmei</h2>
    <p>Log in to continue:</p>
    

  <div class="input-with-tooltip">
  <input type="text" id="username-input" placeholder="Username">
  <span class="tooltip-icon" tabindex="0" aria-label="What is the username for">
    <!-- Inline SVG question icon -->
    <svg class="tooltip-svg" viewBox="0 0 24 24" role="img" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="10" fill="#e6eefc" />
      <text x="12" y="16" font-family="Segoe UI, Arial, sans-serif" font-size="12" text-anchor="middle" fill="#0c5fb8">?</text>
    </svg>
    <span class="tooltip-text">Choose a short name that you remember. It will help keep your records and settings.</span>
  </span>
</div>
    
  <button id="login-btn" class="btn btn-primary">Continue</button>
    
    <!-- Add spacing after the button -->
    <div style="margin-top: 1rem;"></div>

    <!-- Help button removed from inside container; placed below container for better layout -->

  <!-- Registration flow removed for offline app -->
  </div>
  <!-- Help button placed below the main login module -->
  <div style="width:100%; display:flex; justify-content:center; margin-top:36px;">
    <button id="help-btn" class="btn btn-outline" aria-haspopup="dialog">Help</button>
  </div>
<script src="js/shared-ui.js"></script>
<!-- Help modal markup -->
<div id="help-overlay" class="help-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="help-title">
  <div class="help-modal" role="document">
    <h3 id="help-title">Kemmei â€” Quick Help</h3>
    <div class="help-body">
      <p><strong>What is Kemmei?</strong> Kemmei is an offline-first flashcard study/test app for CompTIA certifications. Right now, it covers A+ Core 1 (220-1201).</p>
      <p><strong>How your data is stored:</strong> User progress and small metadata are stored locally (localStorage and packaged user DB). Test results and unlocks are saved per-user and mirrored locally for quick UI updates.</p>
      <p><strong>Flashcards structure:</strong> Kemmei contains flashcard decks for each domain and subdomain as listed in relevant CompTIA Objectives.</p>
      <p><strong>Deck selection & Test mode:</strong> Choose a deck, pick domain/subdomain and select Mode: <em>Casual</em> or <em>Test</em>. Test mode records results; completing a deck in Test mode gets your best result recorded and unlocks higher difficulties (see tooltips). Casual mode preserves unlocked difficulties but does not record deck completion results.</p>
      <p><strong>Quick tips:</strong> Use <em>All</em> to see all unlocked difficulties (the UI preserves this when meaningful). If a difficulty is unavailable the UI will fall back to Easy.</p>
    </div>
    <div class="help-actions">
      <button id="help-close" class="btn btn-secondary">Close</button>
    </div>
  </div>
</div>

<script>
// Help modal behaviour
(() => {
  const helpBtn = document.getElementById('help-btn');
  const overlay = document.getElementById('help-overlay');
  const closeBtn = document.getElementById('help-close');
  let lastFocused = null;

  function show() {
    lastFocused = document.activeElement;
    overlay.classList.remove('hidden');
    overlay.querySelector('.help-modal').focus();
    document.body.classList.add('no-scroll');
  }

  function hide() {
    overlay.classList.add('hidden');
    document.body.classList.remove('no-scroll');
    try { if (lastFocused) lastFocused.focus(); } catch (e) {}
  }

  helpBtn.addEventListener('click', show);
  closeBtn.addEventListener('click', hide);
  overlay.addEventListener('click', (ev) => {
    if (ev.target === overlay) hide();
  });
  document.addEventListener('keydown', (ev) => {
    if (ev.key === 'Escape' && !overlay.classList.contains('hidden')) hide();
  });
})();
</script>
</body>
</html>
