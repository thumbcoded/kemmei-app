<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kemmei Admin Panel 🛠️</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/admin.css" />

  <style>
    .admin-panel-container {
      max-width: 850px;
      margin: 2rem auto;
      padding: 1.5rem;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .admin-header h1 {
      margin: 0;
      font-size: 1.8rem;
    }

    .back-btn {
      font-size: 1rem;
      text-decoration: none;
      color: #007bff;
    }

    #submitMessage {
      margin-top: 0.5rem;
      color: green;
      display: none;
    }
  </style>
</head>

<body class="admin-page">

<div style="display: flex; align-items: center; gap: 2rem; padding: 1rem 2rem; justify-content: center; flex-wrap: wrap;">
  <a href="dashboard.html" class="back-btn">← Back</a>

  <div style="font-size: 1.6rem; font-weight: bold; display: flex; align-items: center; gap: 0.5rem;">
    Kemmei Admin Panel <span class="emoji">🛠️</span>
  </div>

  <div style="display: flex; align-items: center; gap: 0.5rem;">
    <label class="switch">
      <input type="checkbox" id="toggleEditor" />
      <span class="slider"></span>
    </label>
    <span class="backend-label">Card Browser</span>
  </div>

  <div style="display: flex; align-items: center; gap: 0.5rem;">
    <label class="switch">
      <input type="checkbox" id="toggleManager" />
      <span class="slider"></span>
    </label>
    <span class="backend-label">Title Manager</span>
  </div>
</div>



<!-- Main content layout -->
<div class="admin-toggle-layout">

<!-- /////////////// CARD SUBMIT PANEL ///////////////// -->

<div class="admin-panel-container left-panel">

  <h2>📝 Card Editor</h2>

<div id="globalMessageArea" class="system-message hidden"></div> <!-- GLOBAL MSG AREA -->

<div class="admin-content">

<!-- JSON input -->
<textarea id="jsonInput" placeholder="Paste JSON here..."></textarea>

<!-- Import buttons -->
<div class="import-buttons">
  <button id="importBtn">📥 Import</button>
  <button id="clearBtn">🧹 Clear</button>
  <button id="clearAllBtn">🧨 Clear All</button>
</div>

<!-- Card data form -->

<!-- Title -->
<label for="certIdInput">Title:</label>
<div id="certIdInputGroup" class="inline-input-group" style="display: none; gap: 0.5rem;">
  <input id="certIdInput" type="text" placeholder="Short ID (e.g., 220-1201)" />
  <input id="certTitleInput" type="text" placeholder="Enter title name (e.g., CompTIA A+)" />
  <button type="button" class="save-btn" id="saveCertBtn">✔</button>
  <button type="button" class="cancel-btn" id="cancelCertBtn">✖</button>
</div>
<div id="certIdSelectGroup" class="inline-input-group">
  <select id="certIdSelect">
    <option value="">Select a title...</option>
  </select>
</div>

<!-- Domain -->
<label for="domainTitleInput">Domain:</label>
<div id="domainTitleSelectGroup" class="inline-input-group">
  <select id="domainTitleSelect" disabled>
    <option value="">Select domain...</option>
  </select>
</div>
<div id="domainTitleInputGroup" class="inline-input-group" style="display: none; gap: 0.5rem;">
  <input id="domainIdDisplay" type="text" placeholder="Auto ID" readonly style="width: 8ch;" />
  <input id="domainTitleInput" type="text" placeholder="Enter domain name (e.g., Mobile Devices)" />
  <button type="button" class="save-btn" id="saveDomainTitleBtn">✔</button>
  <button type="button" class="cancel-btn" id="cancelDomainTitleBtn">✖</button>
</div>

<!-- Subdomain -->
<label for="subdomainIdInput">Subdomain:</label>
<div id="subdomainIdSelectGroup" class="inline-input-group">
  <select id="subdomainIdSelect" disabled>
    <option value="">Select subdomain...</option>
  </select>
</div>
<div id="subdomainIdInputGroup" class="inline-input-group" style="display: none; gap: 0.5rem;">
  <input id="subdomainIdDisplay" type="text" placeholder="Auto ID" readonly style="width: 8ch;" />
  <input id="subdomainIdInput" type="text" placeholder="Enter subdomain name (e.g., Mobile device connectors)" />
  <button type="button" class="save-btn" id="saveSubdomainIdBtn">✔</button>
  <button type="button" class="cancel-btn" id="cancelSubdomainIdBtn">✖</button>
</div>


          <label>Difficulty:
            <select id="difficulty">
              <option value="easy">Easy</option>
              <option value="medium">Medium</option>
              <option value="hard">Hard</option>
            </select>
          </label>
          <label for="questionType">Question Type:</label>
          <select id="questionType">
            <option value="multiple_choice">Multiple Choice</option>
            <option value="select_multiple">Select Multiple</option>
            <option value="select_all">Select All That Apply</option>
            <option value="pbq">Performance-Based Question (PBQ)</option>
          </select>
          <label>Question Text:
            <textarea id="questionText" placeholder="Enter the question..."></textarea>
          </label>
          <label>Options (one per line):
            <textarea id="options" placeholder="Option A&#10;Option B"></textarea>
          </label>
          <label>Correct Answers (one per line):
            <textarea id="correctAnswers" placeholder="Correct A&#10;Correct B"></textarea>
          </label>
          <label>Explanation:
            <textarea id="explanation" placeholder="Why this is the right answer..."></textarea>
          </label>
          <label>Tags (comma-separated):
            <input id="tags" type="text" placeholder="e.g. RAID,Storage,1101" />
          </label>
          <label>Status:
            <input id="status" type="text" value="approved" />
          </label>
        </form>

        <!-- Action buttons -->
        <div class="card-actions">
          <button id="addAnswerBtn">➕ Add Answer</button>
          <button id="addImageBtn">🖼️ Add Image</button>
          <button id="addCardBtn">✅ Add Card</button>
          <button id="saveChangesBtn" style="display:none;">💾 Save changes</button>
          <button id="cancelEditBtn" style="display:none;">❌ Discard</button>
        </div>

        <!-- Preview section -->
        <h3>🧾 Card Preview:</h3>
        <div id="cardPreviewList" class="card-preview-list"></div>
        <p id="cardCount">Cards created: 0</p>

        <!-- Submit -->
        <button id="submitToBackendBtn">📤 Submit to Backend</button>
        <p id="submitMessage">✔️ Card(s) submitted to backend!</p>

        <!-- Export -->
        <div class="export-buttons">
          <button id="exportFileBtn">💾 Export to File</button>
        </div>

      </div>
    </div>

<!-- RIGHT PANEL: Browser/Editor -->
<div class="admin-panel-container right-panel" id="editorPanel" style="display: none;">
  <h2>🧩 Card Browser</h2>

  <!-- Filters -->
  <div class="card-browser-filters">
    <select id="filterCert">
      <option value="All">All titles</option>
    </select>

    <select id="filterDomain">
      <option value="All">All domains</option>
    </select>

    <select id="filterSubdomain" disabled>
      <option value="">All Subdomains</option>
    </select>

    <select id="filterDifficulty">
      <option value="All">All Difficulty Levels</option>
    </select>

    <div class="search-wrapper">
      <input type="text" id="filterKeyword" placeholder="🔍 Search..." />
      <span id="clearSearch" class="clear-btn" style="display: none;">×</span>
    </div>

    <div id="suggestions" class="keyword-suggestions"></div>
  </div>

  <!-- Select All + Bulk Delete -->
  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
    <div style="display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0; white-space: nowrap;">
      <label class="select-all-wrapper">
        <input type="checkbox" id="selectAllCheckbox" />
        <span>Select all</span>
      </label>
    </div>
  
    <button id="bulkDeleteBtn" style="display: none; background-color: #dc3545; color: white; padding: 0.5rem 1rem; border: none; border-radius: 5px; cursor: pointer;">
      🗑️ Delete Selected
    </button>
  </div>
  
  <!-- Cards Grid -->
  <div id="cardGrid" class="card-browser-grid"></div>
</div>


<!-- /////////////////// TITLE MANAGER PANEL ////////////////////// -->

<div class="admin-panel-container right-panel" id="managerPanel"
     style="display: none; position: relative; padding-bottom: 4rem;">

  <h2>🗂️ Title Manager</h2>

  <!-- Built-in Titles -->
  <h3>Built-in Titles</h3>
  <ul id="builtinTitleList" class="title-list"></ul>

  <!-- User Titles -->
  <h3>User-created Titles</h3>
  <ul id="userTitleList" class="title-list" style="margin-bottom: 0;"></ul>

  <!-- Spacer to prevent overlap with footer -->
  <div style="height: 3.5rem;"></div>

  <!-- Fixed Footer UI -->
  <div id="managerMessageArea"
       class="system-message hidden"
       style="position: absolute; bottom: 1rem; left: 1.5rem; max-width: 65%; z-index: 10;"></div>

  <button id="exportAllBtn"
          style="position: absolute; bottom: 1rem; right: 1.5rem; background-color: #28a745; color: white; z-index: 10;">
    📤 Export All User Data
  </button>
</div>




<script type="module" src="js/admin.js"></script>
<script type="module" src="js/titmgr.js"></script>

</body>

</html>
